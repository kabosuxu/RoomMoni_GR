# RoomMoni_GR
- 研究室の開錠確認システム（GR-CITRUS + 照度センサ + IFTTT + LINE Notify）
- 照度センサで研究室の明かりを検知し、開錠／施錠状態を LINE に通知するシステム

### 0.注意事項・免責事項・ライセンス
- 本プロジェクトは 2019 年当時の実装例です。  
- Rubic のサービス終了により、実際に動作させるには **代替環境の構築やコード移植** が必要です。  
- 本プロジェクトは 個人の趣味範囲 で作成したものです。
- 内容に不具合や瑕疵があっても、作者は一切の責任を負いません。
- 本リポジトリ内のコードは 自由に改変・利用可能なフリーライセンス とします。

### 1.概要
- 照度センサ **GL5529** で室内の明るさを測定  
- マイコン **GR-CITRUS** で照度データを処理  
- **IFTTT** 経由で **LINE Notify** にメッセージを送信  
- 状態変化（明るい → 開錠、暗い → 施錠）を自動で通知  
※ 本プロジェクトは 2019 年当時、ルネサス提供の Ruby 開発環境「**Rubic**」を利用していました。  
現在 Rubic はサービスを終了しているため、実行環境構築は参考程度の位置づけです。  

### 2.ソースコード構成
| ファイル名 | 内容 |
| ---------- | ---- |
| `main.rb` | GR-CITRUS 上で動作するメインスクリプト。照度測定・WiFi接続・IFTTT 送信を制御 |

### 3.ハード・ソフト構成
| 種別   | 部品名／サービス         | 備考 |
| ------ | ------------------------ | ---- |
| マイコン | GR-CITRUS                | ルネサス製 IoT 開発ボード |
| センサ | GL5529 光センサ（CdSセル） | 照度測定用 |
| 通信   | ESP8266（GR-CITRUS 搭載） | WiFi 通信に使用 |
| サービス | IFTTT + LINE Notify      | 通知処理に使用 |
| 開発環境 | Rubic（サービス終了）     | Ruby ベースの開発環境 |

### 4.動作方法

#### (1) 配線
   - GL5529 照度センサを GR-CITRUS のアナログ入力ピン（例：17 番ピン）に接続  
   - 必要に応じて抵抗で分圧  

#### (2) 開発環境準備
   - 当時は Rubic を利用（現在サービス終了済みのため再現は困難）  
   - 参考程度にスクリプトを掲載  

#### (3) コード編集
   - `SSID` / `Passwd` に WiFi 情報を設定  
   - IFTTT Webhook のキーを修正（自身のアカウントに合わせる）  

#### (4) アップロード
   - Rubic 環境から GR-CITRUS へスクリプトを書き込み  

#### (5) 動作確認
   - 照明を ON/OFF し、LINE に通知が届くことを確認  
